.. _DEPLOYNOTES:

DEPLOYNOTES
===========

TODO

Install/Config
--------------

TODO


Solr/EULindexer
^^^^^^^^^^^^^^^

OpenEmory uses Solr and :mod:`eulindexer` for searching and indexing
Fedora content.  The Solr schema included with the source code at
``solr/schema.xml`` should be used as the Solr schema configuration.
The delay for committing index updates should be set in the Solr
configuration file ``solrconfig.xml`` in the ``autoCommit`` section.

The url for accessing the configured Solr instance should be set in
``localsettings.py`` as **SOLR_SERVER_URL**.

Repository content accessible via OpenEmory should be indexed using
**EULindexer**.  To add OpenEmory to an installed and configured
instance of EULindexer, add the deployed indexdata url to the
eulindexer ``localsettings.py``, e.g.::

    INDEXER_SITE_URLS = {
        'openemory': 'http://openemory.library.emory.edu/indexdata/',
    }

To populate the index initially, or to reindex all content, run the
``reindex`` script that is available in EULindexer::

    $ python manage.py reindex -s openemory


Notes for Developers
--------------------

The following instructions can be ignored when deploying to a staging
or production environment, but may be helpful to a developer working
on the project or running automated tests.

Session configuration
^^^^^^^^^^^^^^^^^^^^^

By default, this project is configured to mark Session cookies as
secure.  To enable login over HTTP (e.g., when developing with
Django's runserver), you will need to override this in your
``localsettings.py``.  See the example and comments in
``localsettings.py.dist``.

Test Setup
^^^^^^^^^^

Certain unit tests pass test user credentials to Fedora, in order to test and
simulate accessing Fedora as the logged in user.  For tests to work properly,
the unit test user should be defined (with appropriate permissions)
as a fedora account.  See :mod:`openemory.publication.tests` for account details.
