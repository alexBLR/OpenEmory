{# display all authors for a single article; expects Article object as `article` #}
{# BASE_URL is required for external links in PDF generated by Pisa/XHTML2PDF #}
{% load account_extras %}
<div id="article-authors" class="section">
{#  <h2>Author{{ article.descMetadata.content.authors|pluralize }}:</h2> #} {# don't bold the field name :-) #}
  {% for author in article.descMetadata.content.authors %}
    {% with display_name=author.given_name|add:' '|add:author.family_name %}
      {% user_for_netid author.id as user %}
        {% comment %}
          spaceless won't kill the space before the author.affiliation
          comma, so cram this all on one line :/
        {% endcomment %}
        {% if user.get_profile.has_profile_page %}<a href="{{ BASE_URL|default:'' }}{% url accounts:profile author.id %}">{{ display_name }}</a>{% else %}{{ display_name }}{% endif %}{% if author.affiliation %}, <span class="affiliation">{{ author.affiliation }}</span>{% endif %}
        <div class="clear"></div>{# 352media (?!?) #}
    {% endwith %}
  {% endfor %}
</div>
